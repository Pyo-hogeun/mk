<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>이미지 자산 모음</title>
  <link rel="stylesheet" href="../assets/style/css/style.css">
  <style>
    :root { color-scheme: light; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif; padding: 24px; background:#f8fafc; color:#111827; width: calc(100% - 48px);}
    h1 { margin: 0 0 6px; font-size: 26px; }
    p.meta { margin: 0 0 20px; color:#6b7280; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 16px; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius: 12px; padding: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); display:flex; flex-direction:column; gap: 10px; }
    .thumb-wrap { background:#f2f2f2; border:1px solid #e5e7eb; border-radius: 10px; padding: 8px; display:flex; align-items:center; justify-content:center; height: 120px; overflow: hidden; }
    .thumb-wrap:hover{background: #ddd;}
    .thumb { max-width: 100%; max-height: 100%; object-fit: contain; }
    .info { font-size: 13px; color:#374151; word-break: break-all; display:flex; flex-direction:column; gap: 4px; }
    .info strong { display:block; color:#111827; margin-bottom: 4px; font-size: 14px; }
    .meta-row { display:flex; justify-content:space-between; gap: 8px; align-items:center; }
    .meta-row span { display:block; }
    .meta-label { color:#6b7280; font-size:12px; letter-spacing: -0.01em; }
    .meta-value { color:#111827; font-weight:600; font-size: 13px; }
    .meta-value.dimensions { color:#1f2937; }
    .meta-value.loading { color:#9ca3af; font-weight:500; }
    .empty { padding: 24px; border:1px dashed #d1d5db; border-radius: 12px; text-align:center; background:#fff; color:#6b7280; }
  </style>
</head>
<body class="dark">
  <header>
    <h1>이미지 자산 모음</h1>
    <p class="meta">/assets/images 안의 모든 이미지 파일을 한눈에 확인하세요.</p>
  </header>
  <main>
    <section class="grid">
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/icon_check.svg" data-asset-path="assets/images/icon_check.svg" alt="icon_check.svg"></div>
          <div class="info">
            <strong>icon_check.svg</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">465 B</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/img-phone_left.png" data-asset-path="assets/images/img-phone_left.png" alt="img-phone_left.png"></div>
          <div class="info">
            <strong>img-phone_left.png</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">183.6 KB</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/img-phone_right.png" data-asset-path="assets/images/img-phone_right.png" alt="img-phone_right.png"></div>
          <div class="info">
            <strong>img-phone_right.png</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">46.5 KB</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/img-placeholder.png" data-asset-path="assets/images/img-placeholder.png" alt="img-placeholder.png"></div>
          <div class="info">
            <strong>img-placeholder.png</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">987 B</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/Icon/Icon/SVG.png" data-asset-path="assets/images/Icon/Icon/SVG.png" alt="SVG.png"></div>
          <div class="info">
            <strong>SVG.png</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">714 B</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="thumb-wrap"><img class="thumb" src="../assets/images/Icon/SVG.svg" data-asset-path="assets/images/Icon/SVG.svg" alt="SVG.svg"></div>
          <div class="info">
            <strong>SVG.svg</strong>
            <div class="meta-row">
              <span class="meta-label">파일 크기</span>
              <span class="meta-value">1.5 KB</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">이미지 크기</span>
              <span class="meta-value dimensions loading">계산 중...</span>
            </div>
          </div>
        </article></section>
  </main>
  <script>
    const cards = document.querySelectorAll('.card');

    const computeBasePath = () => {
      const segments = window.location.pathname.split('/').filter(Boolean);
      const repo = segments.length > 0 ? segments[0] : '';
      return repo ? '/' + repo : '';
    };

    const basePath = computeBasePath();

    cards.forEach((card) => {
      const img = card.querySelector('img');
      const dimensionEl = card.querySelector('.meta-value.dimensions');
      if (!img || !dimensionEl) return;

      const assetPath = img.getAttribute('data-asset-path');
      if (assetPath) {
        const normalized = (basePath + '/' + assetPath).replace(/[/\]+/g, '/');
        img.src = normalized;
      }

      const renderDimensions = () => {
        const { naturalWidth, naturalHeight } = img;
        if (naturalWidth && naturalHeight) {
          dimensionEl.textContent = Math.round(naturalWidth) + ' × ' + Math.round(naturalHeight) + 'px';
          dimensionEl.classList.remove('loading');
        } else {
          dimensionEl.textContent = '측정 불가';
          dimensionEl.classList.remove('loading');
        }
      };

      if (img.complete) {
        renderDimensions();
      } else {
        img.addEventListener('load', renderDimensions, { once: true });
        img.addEventListener(
          'error',
          () => {
            dimensionEl.textContent = '로드 실패';
            dimensionEl.classList.remove('loading');
          },
          { once: true }
        );
      }
    });
  </script>
</body>
</html>